<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function Call Graph with Source Links</title>
    <script src="https://unpkg.com/cytoscape@3.29.2/dist/cytoscape.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>Function Call Graph with Source Links</h1>
        <div class="stats-container">
            <div class="stats">
                <div class="stat-value">18</div>
                <div class="stat-label">Functions</div>
            </div>
            <div class="stats">
                <div class="stat-value">22</div>
                <div class="stat-label">Call Relationships</div>
            </div>
            <div class="stats">
                <div class="stat-value">13</div>
                <div class="stat-label">With Callee Location</div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="graph-container">
            <div id="cy"></div>
            <div class="controls">
                <button class="control-button" onclick="resetLayout()">Reset Layout</button>
                <button class="control-button" onclick="switchLayout(this)">レイアウト切替</button>
                <button class="control-button" onclick="fitToContent()">Fit to Content</button>
                <button class="control-button" onclick="toggleNodeLabels()">Toggle Labels</button>
                <button class="control-button" onclick="toggleCalleeLocationFilter()">Hide No-Callee-Location</button>
                <button class="control-button" onclick="toggleInfoPanel()">Toggle Info Panel</button>
            </div>
        </div>

        <div id="info-panel" class="info-panel hidden">
            <div class="info-title">選択した要素の詳細</div>
            <div id="info-content"></div>
        </div>
    </div>

    <div class="generated-time">
        Generated: 2025/7/31 20:08:19
    </div>

    <script>
      const graphData = {
  "nodes": [
    {
      "id": "onclick (main.js:11)",
      "label": "onclick (main.js:11)",
      "locations": [
        {
          "file": "src/main.js",
          "line": 13,
          "column": 5,
          "type": "caller",
          "sourceLine": "    play();"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": false
    },
    {
      "id": "play (play.js:1)",
      "label": "play (play.js:1)",
      "locations": [
        {
          "file": "src/main.js",
          "line": 13,
          "column": 5,
          "type": "definition",
          "sourceLine": "    play();"
        },
        {
          "file": "src/main.js",
          "line": 17,
          "column": 3,
          "type": "definition",
          "sourceLine": "  play();"
        },
        {
          "file": "src/play.js",
          "line": 7,
          "column": 16,
          "type": "caller",
          "sourceLine": "    let json = mml2json(mml);"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "function play() {"
    },
    {
      "id": "anonymous_3 (main.js:3)",
      "label": "anonymous_3 (main.js:3)",
      "locations": [
        {
          "file": "src/main.js",
          "line": 17,
          "column": 3,
          "type": "caller",
          "sourceLine": "  play();"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": false
    },
    {
      "id": "mml2json (mml2json.js:1)",
      "label": "mml2json (mml2json.js:1)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 11,
          "column": 18,
          "type": "caller",
          "sourceLine": "  let commands = compileMmlToCommands(mml);"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true
    },
    {
      "id": "compileMmlToCommands (mml2json.js:14)",
      "label": "compileMmlToCommands (mml2json.js:14)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 11,
          "column": 18,
          "type": "definition",
          "sourceLine": "  let commands = compileMmlToCommands(mml);"
        },
        {
          "file": "src/mml2json.js",
          "line": 18,
          "column": 17,
          "type": "caller",
          "sourceLine": "      \"nodeId\": getNodeId(),"
        },
        {
          "file": "src/mml2json.js",
          "line": 23,
          "column": 17,
          "type": "caller",
          "sourceLine": "      \"nodeId\": getNodeId(),"
        },
        {
          "file": "src/mml2json.js",
          "line": 26,
          "column": 28,
          "type": "caller",
          "sourceLine": "    for (let i = 0, imax = getMmlCommands().length; i < imax; i++) {"
        },
        {
          "file": "src/mml2json.js",
          "line": 27,
          "column": 34,
          "type": "caller",
          "sourceLine": "      let m, checked = {}, def = getMmlCommands()[i];"
        },
        {
          "file": "src/mml2json.js",
          "line": 39,
          "column": 24,
          "type": "caller",
          "sourceLine": "            let mask = repeat(m[0].length, \" \");"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function compileMmlToCommands(mml) {"
    },
    {
      "id": "getNodeId (mml2json.js:153)",
      "label": "getNodeId (mml2json.js:153)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 18,
          "column": 17,
          "type": "definition",
          "sourceLine": "      \"nodeId\": getNodeId(),"
        },
        {
          "file": "src/mml2json.js",
          "line": 23,
          "column": 17,
          "type": "definition",
          "sourceLine": "      \"nodeId\": getNodeId(),"
        },
        {
          "file": "src/mml2json.js",
          "line": 57,
          "column": 27,
          "type": "definition",
          "sourceLine": "                \"nodeId\": getNodeId(),"
        },
        {
          "file": "src/mml2json.js",
          "line": 101,
          "column": 25,
          "type": "definition",
          "sourceLine": "              \"nodeId\": getNodeId(),"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function getNodeId() {"
    },
    {
      "id": "getMmlCommands (mml2json.js:50)",
      "label": "getMmlCommands (mml2json.js:50)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 26,
          "column": 28,
          "type": "definition",
          "sourceLine": "    for (let i = 0, imax = getMmlCommands().length; i < imax; i++) {"
        },
        {
          "file": "src/mml2json.js",
          "line": 27,
          "column": 34,
          "type": "definition",
          "sourceLine": "      let m, checked = {}, def = getMmlCommands()[i];"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function getMmlCommands() {"
    },
    {
      "id": "repeat (mml2json.js:129)",
      "label": "repeat (mml2json.js:129)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 39,
          "column": 24,
          "type": "definition",
          "sourceLine": "            let mask = repeat(m[0].length, \" \");"
        },
        {
          "file": "src/mml2json.js",
          "line": 95,
          "column": 20,
          "type": "definition",
          "sourceLine": "              pm = repeat(m[2].length, \"#\");  // TODO ## -> note number +2 (Tone.js ## 非対応)"
        },
        {
          "file": "src/mml2json.js",
          "line": 97,
          "column": 20,
          "type": "definition",
          "sourceLine": "              pm = repeat(m[2].length, \"b\");"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function repeat(n, ch) {"
    },
    {
      "id": "func (mml2json.js:54)",
      "label": "func (mml2json.js:54)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 57,
          "column": 27,
          "type": "caller",
          "sourceLine": "                \"nodeId\": getNodeId(),"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": false
    },
    {
      "id": "func (mml2json.js:75)",
      "label": "func (mml2json.js:75)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 76,
          "column": 25,
          "type": "caller",
          "sourceLine": "          const ticks = calcAttackToReleaseTicks(m[3], m[4]);"
        },
        {
          "file": "src/mml2json.js",
          "line": 79,
          "column": 13,
          "type": "caller",
          "sourceLine": "            increaseStartTick(ticks);"
        },
        {
          "file": "src/mml2json.js",
          "line": 82,
          "column": 24,
          "type": "caller",
          "sourceLine": "            lCommand = toInt(m[3]);"
        },
        {
          "file": "src/mml2json.js",
          "line": 85,
          "column": 22,
          "type": "caller",
          "sourceLine": "            octave = toInt(m[3]);"
        },
        {
          "file": "src/mml2json.js",
          "line": 95,
          "column": 20,
          "type": "caller",
          "sourceLine": "              pm = repeat(m[2].length, \"#\");  // TODO ## -> note number +2 (Tone.js ## 非対応)"
        },
        {
          "file": "src/mml2json.js",
          "line": 97,
          "column": 20,
          "type": "caller",
          "sourceLine": "              pm = repeat(m[2].length, \"b\");"
        },
        {
          "file": "src/mml2json.js",
          "line": 101,
          "column": 25,
          "type": "caller",
          "sourceLine": "              \"nodeId\": getNodeId(),"
        },
        {
          "file": "src/mml2json.js",
          "line": 102,
          "column": 44,
          "type": "caller",
          "sourceLine": "              \"args\": [m[1] + pm + octave, calcDuration(ticks), calcStartTick()]"
        },
        {
          "file": "src/mml2json.js",
          "line": 104,
          "column": 13,
          "type": "caller",
          "sourceLine": "            increaseStartTick(ticks);"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": false
    },
    {
      "id": "calcAttackToReleaseTicks (mml2json.js:111)",
      "label": "calcAttackToReleaseTicks (mml2json.js:111)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 76,
          "column": 25,
          "type": "definition",
          "sourceLine": "          const ticks = calcAttackToReleaseTicks(m[3], m[4]);"
        },
        {
          "file": "src/mml2json.js",
          "line": 116,
          "column": 16,
          "type": "caller",
          "sourceLine": "      result = calcLtick();"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function calcAttackToReleaseTicks(divide, points) {"
    },
    {
      "id": "increaseStartTick (mml2json.js:147)",
      "label": "increaseStartTick (mml2json.js:147)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 79,
          "column": 13,
          "type": "definition",
          "sourceLine": "            increaseStartTick(ticks);"
        },
        {
          "file": "src/mml2json.js",
          "line": 104,
          "column": 13,
          "type": "definition",
          "sourceLine": "            increaseStartTick(ticks);"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function increaseStartTick(ticks) {"
    },
    {
      "id": "toInt (mml2json.js:136)",
      "label": "toInt (mml2json.js:136)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 82,
          "column": 24,
          "type": "definition",
          "sourceLine": "            lCommand = toInt(m[3]);"
        },
        {
          "file": "src/mml2json.js",
          "line": 85,
          "column": 22,
          "type": "definition",
          "sourceLine": "            octave = toInt(m[3]);"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function toInt(x) {"
    },
    {
      "id": "calcDuration (mml2json.js:139)",
      "label": "calcDuration (mml2json.js:139)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 102,
          "column": 44,
          "type": "definition",
          "sourceLine": "              \"args\": [m[1] + pm + octave, calcDuration(ticks), calcStartTick()]"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function calcDuration(ticks) {"
    },
    {
      "id": "calcStartTick (mml2json.js:144)",
      "label": "calcStartTick (mml2json.js:144)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 102,
          "column": 65,
          "type": "definition",
          "sourceLine": "              \"args\": [m[1] + pm + octave, calcDuration(ticks), calcStartTick()]"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function calcStartTick() {"
    },
    {
      "id": "calcLtick (mml2json.js:150)",
      "label": "calcLtick (mml2json.js:150)",
      "locations": [
        {
          "file": "src/mml2json.js",
          "line": 116,
          "column": 16,
          "type": "definition",
          "sourceLine": "      result = calcLtick();"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "  function calcLtick() {"
    },
    {
      "id": "anonymous_17 (play.js:17)",
      "label": "anonymous_17 (play.js:17)",
      "locations": [
        {
          "file": "src/play.js",
          "line": 17,
          "column": 27,
          "type": "caller",
          "sourceLine": "    j.forEach (element => sub(element));"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": false
    },
    {
      "id": "sub (play.js:23)",
      "label": "sub (play.js:23)",
      "locations": [
        {
          "file": "src/play.js",
          "line": 17,
          "column": 27,
          "type": "definition",
          "sourceLine": "    j.forEach (element => sub(element));"
        }
      ],
      "hasLocationInfo": true,
      "hasCalleeLocationInfo": true,
      "calleeFncDef": "function sub(element) {"
    }
  ],
  "edges": [
    {
      "id": "edge-0",
      "source": "onclick (main.js:11)",
      "target": "play (play.js:1)",
      "hasCalleeLocationInfo": true,
      "file": "src/main.js",
      "line": 13,
      "column": 5,
      "location": "src/main.js:13:5",
      "hasLocationInfo": true,
      "sourceLine": "    play();"
    },
    {
      "id": "edge-1",
      "source": "anonymous_3 (main.js:3)",
      "target": "play (play.js:1)",
      "hasCalleeLocationInfo": true,
      "file": "src/main.js",
      "line": 17,
      "column": 3,
      "location": "src/main.js:17:3",
      "hasLocationInfo": true,
      "sourceLine": "  play();"
    },
    {
      "id": "edge-2",
      "source": "mml2json (mml2json.js:1)",
      "target": "compileMmlToCommands (mml2json.js:14)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 11,
      "column": 18,
      "location": "src/mml2json.js:11:18",
      "hasLocationInfo": true,
      "sourceLine": "  let commands = compileMmlToCommands(mml);"
    },
    {
      "id": "edge-3",
      "source": "compileMmlToCommands (mml2json.js:14)",
      "target": "getNodeId (mml2json.js:153)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 18,
      "column": 17,
      "location": "src/mml2json.js:18:17",
      "hasLocationInfo": true,
      "sourceLine": "      \"nodeId\": getNodeId(),"
    },
    {
      "id": "edge-4",
      "source": "compileMmlToCommands (mml2json.js:14)",
      "target": "getNodeId (mml2json.js:153)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 23,
      "column": 17,
      "location": "src/mml2json.js:23:17",
      "hasLocationInfo": true,
      "sourceLine": "      \"nodeId\": getNodeId(),"
    },
    {
      "id": "edge-5",
      "source": "compileMmlToCommands (mml2json.js:14)",
      "target": "getMmlCommands (mml2json.js:50)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 26,
      "column": 28,
      "location": "src/mml2json.js:26:28",
      "hasLocationInfo": true,
      "sourceLine": "    for (let i = 0, imax = getMmlCommands().length; i < imax; i++) {"
    },
    {
      "id": "edge-6",
      "source": "compileMmlToCommands (mml2json.js:14)",
      "target": "getMmlCommands (mml2json.js:50)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 27,
      "column": 34,
      "location": "src/mml2json.js:27:34",
      "hasLocationInfo": true,
      "sourceLine": "      let m, checked = {}, def = getMmlCommands()[i];"
    },
    {
      "id": "edge-7",
      "source": "compileMmlToCommands (mml2json.js:14)",
      "target": "repeat (mml2json.js:129)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 39,
      "column": 24,
      "location": "src/mml2json.js:39:24",
      "hasLocationInfo": true,
      "sourceLine": "            let mask = repeat(m[0].length, \" \");"
    },
    {
      "id": "edge-8",
      "source": "func (mml2json.js:54)",
      "target": "getNodeId (mml2json.js:153)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 57,
      "column": 27,
      "location": "src/mml2json.js:57:27",
      "hasLocationInfo": true,
      "sourceLine": "                \"nodeId\": getNodeId(),"
    },
    {
      "id": "edge-9",
      "source": "func (mml2json.js:75)",
      "target": "calcAttackToReleaseTicks (mml2json.js:111)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 76,
      "column": 25,
      "location": "src/mml2json.js:76:25",
      "hasLocationInfo": true,
      "sourceLine": "          const ticks = calcAttackToReleaseTicks(m[3], m[4]);"
    },
    {
      "id": "edge-10",
      "source": "func (mml2json.js:75)",
      "target": "increaseStartTick (mml2json.js:147)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 79,
      "column": 13,
      "location": "src/mml2json.js:79:13",
      "hasLocationInfo": true,
      "sourceLine": "            increaseStartTick(ticks);"
    },
    {
      "id": "edge-11",
      "source": "func (mml2json.js:75)",
      "target": "toInt (mml2json.js:136)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 82,
      "column": 24,
      "location": "src/mml2json.js:82:24",
      "hasLocationInfo": true,
      "sourceLine": "            lCommand = toInt(m[3]);"
    },
    {
      "id": "edge-12",
      "source": "func (mml2json.js:75)",
      "target": "toInt (mml2json.js:136)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 85,
      "column": 22,
      "location": "src/mml2json.js:85:22",
      "hasLocationInfo": true,
      "sourceLine": "            octave = toInt(m[3]);"
    },
    {
      "id": "edge-13",
      "source": "func (mml2json.js:75)",
      "target": "repeat (mml2json.js:129)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 95,
      "column": 20,
      "location": "src/mml2json.js:95:20",
      "hasLocationInfo": true,
      "sourceLine": "              pm = repeat(m[2].length, \"#\");  // TODO ## -> note number +2 (Tone.js ## 非対応)"
    },
    {
      "id": "edge-14",
      "source": "func (mml2json.js:75)",
      "target": "repeat (mml2json.js:129)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 97,
      "column": 20,
      "location": "src/mml2json.js:97:20",
      "hasLocationInfo": true,
      "sourceLine": "              pm = repeat(m[2].length, \"b\");"
    },
    {
      "id": "edge-15",
      "source": "func (mml2json.js:75)",
      "target": "getNodeId (mml2json.js:153)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 101,
      "column": 25,
      "location": "src/mml2json.js:101:25",
      "hasLocationInfo": true,
      "sourceLine": "              \"nodeId\": getNodeId(),"
    },
    {
      "id": "edge-16",
      "source": "func (mml2json.js:75)",
      "target": "calcDuration (mml2json.js:139)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 102,
      "column": 44,
      "location": "src/mml2json.js:102:44",
      "hasLocationInfo": true,
      "sourceLine": "              \"args\": [m[1] + pm + octave, calcDuration(ticks), calcStartTick()]"
    },
    {
      "id": "edge-17",
      "source": "func (mml2json.js:75)",
      "target": "calcStartTick (mml2json.js:144)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 102,
      "column": 65,
      "location": "src/mml2json.js:102:65",
      "hasLocationInfo": true,
      "sourceLine": "              \"args\": [m[1] + pm + octave, calcDuration(ticks), calcStartTick()]"
    },
    {
      "id": "edge-18",
      "source": "func (mml2json.js:75)",
      "target": "increaseStartTick (mml2json.js:147)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 104,
      "column": 13,
      "location": "src/mml2json.js:104:13",
      "hasLocationInfo": true,
      "sourceLine": "            increaseStartTick(ticks);"
    },
    {
      "id": "edge-19",
      "source": "calcAttackToReleaseTicks (mml2json.js:111)",
      "target": "calcLtick (mml2json.js:150)",
      "hasCalleeLocationInfo": true,
      "file": "src/mml2json.js",
      "line": 116,
      "column": 16,
      "location": "src/mml2json.js:116:16",
      "hasLocationInfo": true,
      "sourceLine": "      result = calcLtick();"
    },
    {
      "id": "edge-20",
      "source": "play (play.js:1)",
      "target": "mml2json (mml2json.js:1)",
      "hasCalleeLocationInfo": true,
      "file": "src/play.js",
      "line": 7,
      "column": 16,
      "location": "src/play.js:7:16",
      "hasLocationInfo": true,
      "sourceLine": "    let json = mml2json(mml);"
    },
    {
      "id": "edge-21",
      "source": "anonymous_17 (play.js:17)",
      "target": "sub (play.js:23)",
      "hasCalleeLocationInfo": true,
      "file": "src/play.js",
      "line": 17,
      "column": 27,
      "location": "src/play.js:17:27",
      "hasLocationInfo": true,
      "sourceLine": "    j.forEach (element => sub(element));"
    }
  ]
};
      const repo = "cat2151/tonejs-mml-to-json";
      const branch = "main";
    </script>
    <script src="callgraph.js"></script>
</body>
</html>