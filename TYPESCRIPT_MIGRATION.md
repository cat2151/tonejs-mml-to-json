# TypeScript Migration

This project has been converted from JavaScript to TypeScript.

## Structure

- **Source files**: `src/*.ts` - TypeScript source code
- **Compiled output**: `dist/*.js` - JavaScript compiled from TypeScript
- **Type definitions**: `dist/*.d.ts` - TypeScript type definitions

## Development

### Building TypeScript

```bash
npm run build:ts
```

This compiles TypeScript files from `src/` to `dist/`.

### Running Tests

```bash
npm test
```

Tests import directly from `.ts` files via Vitest's TypeScript support.

### Browser Usage

The HTML files reference the compiled JavaScript files in `dist/`.

## Files

### TypeScript Source Files

- `src/mml2ast.ts` - MML to AST converter with full type definitions
- `src/ast2json.ts` - AST to Tone.js JSON converter with type definitions
- `src/mml2json-wasm.ts` - WASM wrapper with type declarations
- `src/play.ts` - Tone.js player with type definitions
- `src/main.ts` - Main entry point with DOM types

### Legacy JavaScript Files

- `src/mml2json.js` - Legacy MML parser (kept for compatibility)
- `src/grammar.js` - Generated by Peggy parser (not converted)

## Type Safety

The TypeScript configuration (`tsconfig.json`) enforces strict type checking:

- Strict mode enabled
- All type definitions exported for library usage
- Source maps generated for debugging
- Declaration files generated for TypeScript consumers
