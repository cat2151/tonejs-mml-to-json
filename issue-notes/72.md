# issue 未使用のソースコードがあるか調査する。未使用のソースコードはすべて削除し、見通しをよくする #72
[issues #72](https://github.com/cat2151/tonejs-mml-to-json/issues/72)

## 調査結果

### 削除したもの
**`dev-setup/` ディレクトリ** (計237行)
- `dev-setup/setup.js` - 146行
- `dev-setup/README.md` - 93行

このディレクトリはPeggyjsパーサーを使用していた時代のTDD環境構築スクリプトでした。
プロジェクトがTree-sitterに移行してからは使用されていません。

### 使用されているすべてのソースファイル

#### TypeScript ファイル (src/) - 7ファイルすべて使用中 ✅
- `index.ts` - ライブラリのメインエントリーポイント (package.json の main)
- `mml2ast.ts` - MML→AST変換 (index.ts からインポート)
- `ast2json.ts` - AST→JSON変換 (index.ts からインポート)
- `mml2json-wasm.ts` - デモページ用のWASM初期化 (index.html でロード)
- `main.ts` - デモページのUIコントローラー (index.html でロード)
- `play.ts` - 再生機能 (index.html でロード)
- `demos.ts` - デモデータ (main.ts からインポート)

#### Rust ファイル (rust/src/) - 10ファイルすべて使用中 ✅
- `lib.rs` - ルートモジュール、WASMバインディング
- `ast.rs` - AST型定義 (すべての変換モジュールで使用)
- `mml2ast.rs` - Tree-sitterパーサー (lib.rs で使用)
- `cst_to_ast.rs` - web-tree-sitter CST変換 (lib.rs で使用)
- `ast2json.rs` - AST→JSON変換のメインロジック
- `command.rs` - コマンド構造体 (ast2json.rs で使用)
- `timing.rs` - タイミング計算 (ast2json.rs で使用)
- `effects.rs` - エフェクト処理 (ast2json.rs で使用)
- `instrument.rs` - 楽器処理 (ast2json.rs で使用)
- `track.rs` - トラック分割 (ast2json.rs で使用)

#### ユーティリティファイル - すべて使用中 ✅
- `scripts/copy-libs.js` - ビルドスクリプト (package.json で使用)
- `rust/build.rs` - Cargoビルドスクリプト
- `rust/examples/basic_usage.rs` - ライブラリ使用例

### 検証結果
✅ 全364テストが成功
✅ コードレビュー: 問題なし
✅ CodeQLセキュリティスキャン: 問題なし

### 結論
**未使用のソースコードは見つかりませんでした。** 
obsoleteな `dev-setup/` ディレクトリ (237行) のみを削除し、コードの見通しを改善しました。
すべてのソースファイルが現在のアーキテクチャで活用されています。

